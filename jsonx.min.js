// [jsonx](http://neocotic.com/jsonx) 1.0.0
// (c) 2011 Alasdair Mercer
// jsonx is freely distributable under the MIT license.
// Portions of jsonx are inspired or borrowed from jQuery.
// For all details and documentation:
// http://neocotic.com/jsonx
var JSONX=JSONX||{};(function(a,b){var c=a.document,d=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,e=/^a(?:rea)?$/i,f=/^(?:button|input|object|select|textarea)$/i,g=/\:|^on/,h=/^(?:button|input)$/i,i,j,k={attr:function(a,c,e,f){var h,l;if(!("getAttribute"in a)){return k.prop(a,c,e,f)}e=c&&k.attrFix[e]||e;h=k.attrHooks[e];if(!h){if(d.test(e)){h=i}else if(j&&e!=="className"&&(k.nodeName(a,"form")||g.test(e))){h=j}}if(f!==b){if(f===null){return b}else if(h&&"set"in h&&c&&(l=h.set(a,f,e))!==b){return l}else{a.setAttribute(e,""+f);return f}}else if(h&&"get"in h&&c&&(l=h.get(a,e))!==null){return l}else{l=a.getAttribute(e);return l===null?b:l}},attributes:function(a,c){var d=0,e,f=a.nodeType!==1||!k.isXml(a);if(c===b){c={};if(a.attributes.length>0){for(;d<a.attributes.length;d++){e=a.attributes[d].name;e=f&&k.propFix[e]||e;c[e]=k.attr(a,f,e)}}return c}else{for(e in c){k.attr(a,f,e,c[e])}}},attrFix:{tabindex:"tabIndex"},attrHooks:{tabIndex:{get:function(a){var b=a.getAttributeNode("tabIndex"),c;if(b&&b.specified){c=parseInt(b.value,10)}else if(f.test(a.nodeName)||e.test(a.nodeName)&&a.href){c=0}return c}},type:{set:function(a,b){var c;if(h.test(a.nodeName)&&a.parentNode){throw new Error("Can't change attribute: type")}else if(!k.support.radioValue&&b==="radio"&&k.nodeName(a,"input")){c=a.value;a.setAttribute("type",b);if(c){a.value=c}return b}}},value:{get:function(a,b){if(j&&k.nodeName(a,"button")){return j.get(a,b)}return b in a?a.value:null},set:function(a,b,c){if(j&&k.nodeName(a,"button")){return j.set(a,b,c)}a.value=b}}},classToType:{},contents:function(a){if(k.nodeName(a,"iframe")){a=a.contentDocument||a.contentWindow.document}return k.makeArray(a.childNodes)},each:function(a,c,d){var e=0,f;if(d===b){d=" "}switch(k.type(a)){case"string":a=a.split(d);case"array":for(f in a){if(c.call(a[f],f,a[f])===false){break}}break;case"object":for(;e<a.length;){if(c.call(a[e],e,a[e++])===false){break}}}return a},isArray:Array.isArray||function(a){return k.type(a)==="array"},isEmptyObject:function(a){var b;for(b in a){return false}return true},isPlainObject:function(a){var c;if(!a||k.type(a)!=="object"||a.nodeType||k.isWindow(a)){return false}if(a.constructor&&!Object.prototype.hasOwnProperty.call(a,"constructor")&&!Object.prototype.hasOwnProperty.call(a.constructor.prototype,"isPrototypeOf")){return false}for(c in a){}return c===b||Object.prototype.hasOwnProperty.call(a,c)},isWindow:function(a){return a&&k.type(a)==="object"&&"setInterval"in a},isXml:function(a){a=(a?a.ownerDocument||a:0).documentElement;return a?a.nodeName.toLowerCase()!=="html":false},makeArray:function(a){var b=[],c;if(a!==null){c=k.type(a);if(a.length===null||c==="string"||c==="function"||c==="regexp"||k.isWindow(a)){Array.prototype.push.call(b,a)}else{k.merge(b,a)}}return b},merge:function(a,c){var d=a.length,e=0,f;if(k.type(c.length)==="number"){for(f=c.length;e<f;e++){a[d++]=c[e]}}else{while(c[e]!==b){a[d++]=c[e++]}}a.length=d;return a},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},prop:function(a,c,d,e){var f,g;d=c&&k.propFix[d]||d;f=k.propHooks[d];if(e!==b){if(f&&"set"in f&&(g=f.set(a,e,d))!==b){return g}else{return a[d]=e}}else{if(f&&"get"in f&&(g=f.get(a,d))!==b){return g}else{return a[d]}}},propFix:{cellspacing:"cellSpacing",cellpadding:"cellPadding","class":"className",colspan:"colSpan",contenteditable:"contentEditable","for":"htmlFor",frameborder:"frameBorder",maxlength:"maxLength",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},propHooks:{},support:function(){var a,b=c.createElement("div"),d,e,f;b.setAttribute("className","t");b.innerHTML='<a href="/a" style="top:1px;">a</a>';a=b.getElementsByTagName("a")[0];f=c.createElement("select");e=f.appendChild(c.createElement("option"));var g={hrefNormalized:a.getAttribute("href")==="/a",getSetAttribute:b.className!=="t",optSelected:e.selected,style:/top/.test(a.getAttribute("style"))};d=c.createElement("input");d.value="t";d.setAttribute("type","radio");g.radioValue=d.value==="t";return g}(),type:function(a){if(a===null){return String(a)}return k.classToType[Object.prototype.toString.call(a)]||"object"}};k.each("Boolean Number String Function Array Date RegExp Object",function(a,b){k.classToType["[object "+b+"]"]=b.toLowerCase()});i={get:function(a,c){return k.prop(a,c)?c.toLowerCase():b},set:function(a,b,c){var d;if(b===true){d=k.propFix[c]||c;if(d in a){a[d]=true}a.setAttribute(c,c.toLowerCase())}return c}};if(!k.support.getSetAttribute){k.attrFix=k.propFix;j=k.attrHooks.name=k.attrHooks.title={get:function(a,c){var d=a.getAttributeNode(c);return d&&d.nodeValue!==""?d.nodeValue:b},set:function(a,b,c){var d=a.getAttributeNode(c);if(d){d.nodeValue=b;return b}}};k.each("width height",function(a,b){k.attrHooks[b]=k.attrHooks[b]||{};k.attrHooks[b].set=function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}if(!k.support.hrefNormalized){k.each("href src width height",function(a,c){k.attrHooks[c]=k.attrHooks[c]||{};k.attrHooks[c].get=function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}if(!k.support.style){k.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}}if(!k.support.optSelected){k.attrHooks.selected=k.attrHooks.selected||{};k.propHooks.selected.get=function(a){var b=a.parentNode;if(b){b.selectedIndex;if(b.parentNode){b.parentNode.selectedIndex}}}}if(k.type(JSONX.build)!=="function"){JSONX.build=function(a){function d(a,b){var e=[],f={};if(k.isArray(a)){if(!a.length||k.type(a[0])!=="string"){throw new SyntaxError("JSONX.build")}f=c.createElement(a[0]);if(a.length>1){if(k.isPlainObject(a[1])){k.attributes(f,a[1]);if(a.length>2){e=Array.prototype.slice.call(a,2)}}else{e=Array.prototype.slice.call(a,1)}if(e.length){d(e,f)}}}else if(k.type(a)==="string"){b.appendChild(a)}return b}if(a===b){return b}if(k.type(a)==="string"){a=JSONX.parse(a)}if(!k.isArray(a)){throw new TypeError("JSONX.build")}return k.contents(d(a,c.createElement("x")))}}if(k.type(JSONX.parse)!=="function"){JSONX.parse=function(a){function c(a){var b,d,e=0,f,g,h=[];for(;e<a.length;e++){g=a[e];d=k.contents(g);Array.prototype.push.call(h,g.nodeName.toLowerCase());b=k.attributes(g);if(!k.isEmptyObject(b)){Array.prototype.push.call(h,b)}if(d.length){for(f=0;f<d.length;f++){if(d[f].nodeType===3){Array.prototype.push.call(h,d[f].textContent)}else{Array.prototype.push.call(h,c([d[f]]))}}}}return h}if(a===b){return b}switch(k.type(a)){case"string":return JSON.parse(a);case"array":return c(a);case"object":if(k.type(a.nodeType)==="number"){return c([a])}if(k.type(a.length)==="number"){return c(k.makeArray(a))}}throw new TypeError("JSONX.parse")}}if(k.type(JSONX.stringify)!=="function"){JSONX.stringify=function(a){var c=k.type(a);if(a===b){return b}if(c==="array"&&a.length>0&&a[0].nodeType||c==="object"){a=JSONX.parse(a)}if(k.isArray(a)){return JSON.stringify(a)}throw new TypeError("JSONX.stringify")}}})(window)